<div style="text-align:center; margin-top:12px;">
  <% if @result %>
    <h2 style="color:green;">âš½ï¸ ã‚´ã‚©ã‚©ãƒ¼ãƒ«ï¼ï¼</h2>
  <% else %>
    <h2 style="color:red;">ğŸ§¤ ã‚»ãƒ¼ãƒ–ã•ã‚ŒãŸ... </h2>
  <% end %>
  <%= link_to root_path, class: "btn", "aria-label" => "ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹" do %>
    <span class="dot" aria-hidden="true"></span> ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦
  <% end %>

<%# --- XæŠ•ç¨¿æ©Ÿèƒ½ --- %>
<% share_text = "PKé“å ´ã«æŒ‘æˆ¦ã—ãŸã‚ˆï¼" %>
<% share_text = "ã‚ãªãŸã®æœ€é«˜è¨˜éŒ²ã¯#{@max_streak_count}é€£ã‚´ãƒ¼ãƒ«ï¼" %>
<% share_hashtags = "pk_dojo,ã‚¹ãƒãƒ¼ãƒ„ã®ç§‹,RUNTEQ" %>
<% share_url = root_url %>
<% intent = "https://twitter.com/intent/tweet?text=#{ERB::Util.url_encode(share_text)}&url=#{ERB::Util.url_encode(share_url)}&hashtags=#{ERB::Util.url_encode(share_hashtags)}" %>

<div style="margin-top:10px;">
  <%= link_to "X ã«æŠ•ç¨¿ã™ã‚‹", intent, class: "btn btn--ghost", target: "_blank", rel: "noopener" %>
</div>
</div>

<div class="pk-field <%= 'shake' unless @result %>">
  <%= image_tag "pk_goal_2.png", class: "goal", alt: "" %>

  <%= image_tag "keeper_normal.png", class: "keeper #{@keeper_choice}", alt: "" %>

  <div class="ball-position <%= @game.choice %>"> <%# è¹´ã£ãŸãƒœãƒ¼ãƒ«ã‚’ãã®å ´ã«æ®‹ã™%>
    <%= image_tag "soccer_ball.png", size: "100x100" %>
  </div>
</div>

<%# ---  ã‚»ãƒ¼ãƒ–ã•ã‚Œé€£ç¶šã‚´ãƒ¼ãƒ«ãŒé€”åˆ‡ã‚ŒãŸæ™‚ã«ã€ç›´å‰é€£ç¶šã®ã‚´ãƒ¼ãƒ«æ•°ã‚’è¡¨ç¤º ---%>
<% if @streak_broken %>
  <script>
    (function() {
      const onLoad = () => {
        const b = document.querySelector('.streak-banner');
        if (!b) return;
        b.classList.add('break');
        setTimeout(() => b.classList.remove('break'), 1800); // 0.6s Ã— 3å›åˆ†
      };
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', onLoad, { once:true });
      } else {
        onLoad();
      }
    })();
  </script>
<% end %>
